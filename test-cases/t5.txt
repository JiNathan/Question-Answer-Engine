The Pentagon, without once mentioning the word “Confederate,” announced a policy on Friday that essentially banned displays of the Confederate flag on military installations around the world. In a carefully worded memo that Defense Department officials said they hoped would avoid igniting another defense of the flag from President Trump, Defense Secretary Mark T. Esper issued guidance that listed the types of flags that could be displayed on military installations — in barracks, on cars and on signs. According to the guidance, appropriate flags include those of American states and territories, military services and other countries that are allies of the United States. The guidance never specifically says that Confederate flags are banned, but they do not fit in any of the approved categories — and any such flags are prohibited. “Problem solved — we hope,” one Defense Department official said on Friday, speaking on the condition of anonymity so as not to anger Mr. Trump. ADVERTISEMENT Continue reading the main story That senior military leaders are contorting themselves to such an extent shows the gap that has developed between the White House and the movement for racial justice that has swept across the country since the killing of George Floyd while in police custody in May in Minneapolis. As protests ignited, senior Defense Department officials began grappling with the legacy of racism in the military. Gen. Mark A. Milley, the chairman of the Joint Chiefs of Staff, said last week at a House hearing that the Pentagon needed to take “a hard look” at changing the names of Army bases honoring Confederate officers who had fought against the Union during the Civil War, explicitly laying out a course that diverges from his commander in chief. Ten Army bases that honor Confederate generals who fought to defend the slaveholding South have been the focus of a growing movement for change. Mr. Trump, for his part, has sided with those who want symbols of the Confederacy to remain in place. “The United States of America trained and deployed our HEROES on these Hallowed Grounds, and won two World Wars,” Mr. Trump wrote in a string of Twitter posts. “Therefore, my Administration will not even consider the renaming of these Magnificent and Fabled Military Installations. Our history as the Greatest Nation in the World will not be tampered with. Respect our Military!” In the hearing, General Milley echoed senior military leaders who also wanted to remove the Confederate symbols and base names. “There is no place in our armed forces for manifestations or symbols of racism, bias or discrimination,” he said. ADVERTISEMENT Continue reading the main story Mr. Esper’s memo on Friday did not address the issue of bases named after Confederate generals; one senior military official said this week that the Pentagon would wait until after the November election before further raising the issue. But the memo goes after the many American soldiers, Marines and airmen who display Confederate flags and other symbols in their barracks and in parking lots on military installations. “Flags are powerful symbols, particularly in the military community for whom flags embody common mission, common histories, and the special, timeless bond of warriors,” Mr. Esper said in his memo, before quoting former Justice John Paul Stevens that the United States flag “is a symbol of freedom, of equal opportunity, of religious tolerance, and of good will for other peoples who share our aspirations.” Mr. Esper added in his memo that “the flags we fly must accord with the military imperatives of good order and discipline, treating all our people with dignity and respect, and rejecting divisive symbols.” A Defense Department official said that the new directive meant that Black Lives Matter and L.G.B.T.Q. flags would not be allowed, either. The ban applies to public and shared spaces; troops and military officials can display Confederate flags in areas deemed private and personal, like lockers and single rooms. “It’s absolutely outrageous that Defense Secretary Mark Esper would ban the Pride flag — the very symbol of inclusion and diversity,” said Jennifer Dane, the interim executive director of the advocacy group Modern Military Association of America. “In what universe is it OK to turn an opportunity to ban a racist symbol like the Confederate flag into an opportunity to ban the symbol of diversity? This decision sends an alarming message to L.G.B.T.Q. service members, their families, and future recruits.” Next week, senators will continue their own bipartisan push to strip military bases of Confederate symbols, advancing an amendment to the annual defense bill spearheaded by Senator Elizabeth Warren, Democrat of Massachusetts, that would require the Pentagon to eliminate Confederate names, monuments or symbols from military assets in three years. The House is expected to press ahead on a similar measure as lawmakers consider their version of the military policy legislation. Top Republican leaders in Congress have indicated they would broadly support such measures. Senator Mitch McConnell, Republican of Kentucky and the majority leader, said this week in an interview with The Wall Street Journal that he would not block the effort to rename the bases despite Mr. Trump’s pledge to veto the broader defense bill if Ms. Warren’s amendment was included. Representative Kevin McCarthy, Republican of California and the House minority leader, told reporters last month that he was “not opposed” to renaming the bases. ADVERTISEMENT Continue reading the main story The Marine Corps this year banned the Confederate flag, and the Army was moving to do the same until Mr. Esper intervened, saying that he wanted to issue uniform guidance across all services.